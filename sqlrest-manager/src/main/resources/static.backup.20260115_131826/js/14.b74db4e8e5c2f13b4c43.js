webpackJsonp([14],{"RL/p":function(e,a){},"n/J7":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("mvHQ"),o=t.n(s),r={name:"firewall",data:function(){return{status:"ON",mode:"BLACK",addresses:""}},methods:{loadData:function(){var e=this;this.$http.get("/sqlrest/manager/api/v1/firewall/detail").then(function(a){0===a.data.code?(e.status=a.data.data.status,e.mode=a.data.data.mode,e.addresses=a.data.data.addresses):alert("加载数据失败:"+a.data.message)})},modeChange:function(e){console.log(e)},handleSave:function(){var e=this;"ON"!==this.status||this.addresses&&!/^\s*$/.test(this.addresses)?this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/firewall/save",data:o()({status:this.status,mode:this.mode,addresses:this.addresses})}).then(function(a){0===a.data.code?(e.$alert("访问控制保存成功","提示信息",{confirmButtonText:"确定",type:"info"}),e.loadData()):alert("保存失败:"+a.data.message)}):alert("IP列表不能为空!")}},created:function(){this.loadData()}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-card",[t("el-form",{attrs:{"label-width":"200px"}},[t("el-form-item",{attrs:{label:"访问控制"}},[t("el-switch",{attrs:{"active-color":"#13ce66","active-value":"ON","inactive-value":"OFF","active-text":"开启","inactive-text":"关闭"},model:{value:e.status,callback:function(a){e.status=a},expression:"status"}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"ON"==e.status,expression:"status=='ON'"}]},[t("el-form-item",{attrs:{label:"名单"}},[t("el-radio-group",{on:{change:e.modeChange},model:{value:e.mode,callback:function(a){e.mode=a},expression:"mode"}},[t("el-radio",{attrs:{label:"BLACK"}},[e._v("黑名单")]),e._v(" "),t("el-radio",{attrs:{label:"WHITE"}},[e._v("白名单")])],1),e._v(" "),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:"BLACK"==e.mode,expression:"mode == 'BLACK'"}],attrs:{title:"除了黑名单列表中的IP禁止访问API，其他IP一律允许访问",type:"warning",closable:!1}}),e._v(" "),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:"WHITE"==e.mode,expression:"mode == 'WHITE'"}],attrs:{title:"只有白名单列表中的IP才允许访问API，其他IP一律禁止访问",type:"warning",closable:!1}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"BLACK"==e.mode,expression:"mode == 'BLACK'"}],attrs:{label:"黑名单IP列表"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:20},placeholder:"每行一个IP，多个IP请用换行分隔."},model:{value:e.addresses,callback:function(a){e.addresses=a},expression:"addresses"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"WHITE"==e.mode,expression:"mode == 'WHITE'"}],attrs:{label:"白名单IP列表"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:20},placeholder:"每行一个IP，多个IP请用换行分隔."},model:{value:e.addresses,callback:function(a){e.addresses=a},expression:"addresses"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleSave}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var d=t("VU/8")(r,l,!1,function(e){t("RL/p")},"data-v-ff08f9d0",null);a.default=d.exports}});
//# sourceMappingURL=14.b74db4e8e5c2f13b4c43.js.map