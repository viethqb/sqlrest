{"version":3,"sources":["webpack:///src/views/setting/topology.vue","webpack:///./src/views/setting/topology.vue?9520","webpack:///./src/views/setting/topology.vue"],"names":["topology","name","data","backgroundColor","chart","nodes","links","option","mounted","this","initTopology","renderChart","created","loadNodeData","methods","dispose","echarts","$refs","topologyChart","_this","$http","get","then","res","code","managerNodes","gatewayNodes","executorNodes","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","node","value","serviceId","includes","push","id","instanceId","host","port","role","address","memory","cpu","disk","status","err","return","concat","forEach","gateway","executor","source","target","alert","message","_this2","positions","calculatePositions","seriesData","map","nodeColor","x","y","symbolSize","itemStyle","color","borderColor","borderWidth","label","show","position","formatter","fontSize","fontWeight","emphasis","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","title","text","subtext","top","left","tooltip","trigger","params","dataType","split","series","type","layout","symbol","roam","edgeSymbol","edgeSymbolSize","edgeLabel","lineStyle","opacity","width","curveness","focus","setOption","window","addEventListener","resize","clientWidth","height","clientHeight","managerNode","find","filter","length","gatewaySpacing","index","executorSpacing","updateNodeData","Math","min","max","random","refreshData","$message","duration","beforeDestroy","setting_topology","render","_vm","_h","$createElement","_c","_self","staticClass","style","_m","_v","on","click","ref","attrs","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.9c449fbb19bce679b3d1.js","sourcesContent":["```vue\r\n<template>\r\n  <div class=\"topology-container\"\r\n       :style=\"{ backgroundColor: backgroundColor }\">\r\n    <div class=\"header\">\r\n      <div class=\"legend-item\">\r\n        <div class=\"legend-color manager-color\"></div>\r\n        <div class=\"legend-info\">\r\n          <span class=\"legend-text\">Manager</span>\r\n          <span class=\"legend-desc\">接口管理节点</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"legend-item\">\r\n        <div class=\"legend-color gateway-color\"></div>\r\n        <div class=\"legend-info\">\r\n          <span class=\"legend-text\">Gateway</span>\r\n          <span class=\"legend-desc\">接口网关节点</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"legend-item\">\r\n        <div class=\"legend-color executor-color\"></div>\r\n        <div class=\"legend-info\">\r\n          <span class=\"legend-text\">Executor</span>\r\n          <span class=\"legend-desc\">接口执行节点</span>\r\n        </div>\r\n      </div>\r\n      <button class=\"refresh-btn\"\r\n              @click=\"refreshData\">点击刷新</button>\r\n    </div>\r\n    <div class=\"topology-content\">\r\n      <div id=\"topology-chart\"\r\n           ref=\"topologyChart\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: 'TopologyView',\r\n  data () {\r\n    return {\r\n      backgroundColor: '#b2c8e2',\r\n      chart: null,\r\n      nodes: [],\r\n      links: [],\r\n      option: {}\r\n    };\r\n  },\r\n  mounted () {\r\n    this.initTopology();\r\n    this.renderChart();\r\n  },\r\n  created () {\r\n    this.loadNodeData();\r\n  },\r\n  methods: {\r\n    initTopology () {\r\n      if (this.chart) {\r\n        this.chart.dispose();\r\n      }\r\n      this.chart = echarts.init(this.$refs.topologyChart);\r\n    },\r\n    loadNodeData () {\r\n      this.$http.get(\"/sqlrest/manager/api/v1/node/topology\").then(res => {\r\n        if (0 === res.data.code) {\r\n          var managerNodes = []\r\n          var gatewayNodes = []\r\n          var executorNodes = []\r\n          for (let node of res.data.data) {\r\n            if (node.serviceId.includes('MANAGER')) {\r\n              managerNodes.push({\r\n                id: node.instanceId,\r\n                name: node.host + \":\" + node.port,\r\n                role: 'Manager',\r\n                address: node.host,\r\n                port: node.port,\r\n                memory: node.memory | 65,\r\n                cpu: node.cpu | 33,\r\n                disk: node.disk | 20,\r\n                status: node.status | 'normal'\r\n              })\r\n            } else if (node.serviceId.includes('GATEWAY')) {\r\n              gatewayNodes.push(\r\n                {\r\n                  id: node.instanceId,\r\n                  name: node.host + \":\" + node.port,\r\n                  role: 'Gateway',\r\n                  address: node.host,\r\n                  port: node.port,\r\n                  memory: node.memory | 35,\r\n                  cpu: node.cpu | 53,\r\n                  disk: node.disk | 30,\r\n                  status: node.status | 'normal'\r\n                }\r\n              )\r\n            } else if (node.serviceId.includes('EXECUTOR')) {\r\n              executorNodes.push(\r\n                {\r\n                  id: node.instanceId,\r\n                  name: node.host + \":\" + node.port,\r\n                  role: 'Executor',\r\n                  address: node.host,\r\n                  port: node.port,\r\n                  memory: node.memory | 25,\r\n                  cpu: node.cpu | 13,\r\n                  disk: node.disk | 20,\r\n                  status: node.status | 'normal'\r\n                }\r\n              )\r\n            }\r\n          }\r\n\r\n          // 构建节点数组\r\n          this.nodes = [...managerNodes, ...gatewayNodes, ...executorNodes];\r\n          // 构建连接关系\r\n          this.links = [];\r\n          // Gateway连接到所有Executor\r\n          gatewayNodes.forEach(gateway => {\r\n            executorNodes.forEach(executor => {\r\n              this.links.push({\r\n                source: gateway.id,\r\n                target: executor.id\r\n              });\r\n            });\r\n          });\r\n        } else {\r\n          alert(\"加载数据失败:\" + res.data.message);\r\n          return\r\n        }\r\n      });\r\n    },\r\n    renderChart () {\r\n      // 计算节点位置\r\n      const positions = this.calculatePositions();\r\n\r\n      // 为每个节点创建配置\r\n      const seriesData = this.nodes.map(node => {\r\n        let nodeColor = '#409EFF';\r\n        if (node.role === 'Gateway') nodeColor = '#10b981';\r\n        if (node.role === 'Executor') nodeColor = '#f59e0b';\r\n        if (node.role === 'Manager') nodeColor = '#3b82f6';\r\n\r\n        return {\r\n          id: node.id,\r\n          name: `${node.name}\\n${node.address}\\nMem: ${node.memory}% | CPU: ${node.cpu}% | Disk: ${node.disk}%`,\r\n          x: positions[node.id].x,\r\n          y: positions[node.id].y,\r\n          value: `${node.address}`,\r\n          port: `${node.port}`,\r\n          symbolSize: node.role === 'Manager' ? 100 : 90,\r\n          itemStyle: {\r\n            color: nodeColor,\r\n            borderColor: '#fff',\r\n            borderWidth: 2\r\n          },\r\n          label: {\r\n            show: true,\r\n            position: 'inside',\r\n            formatter: node.name,\r\n            fontSize: 12,\r\n            fontWeight: 'bold',\r\n            color: '#fff'\r\n          },\r\n          emphasis: {\r\n            itemStyle: {\r\n              borderWidth: 4,\r\n              shadowBlur: 10,\r\n              shadowOffsetX: 0,\r\n              shadowOffsetY: 0,\r\n              shadowColor: 'rgba(0, 0, 0, 0.3)'\r\n            }\r\n          }\r\n        };\r\n      });\r\n\r\n      this.option = {\r\n        backgroundColor: this.backgroundColor,\r\n        title: {\r\n          text: '',\r\n          subtext: '',\r\n          top: '10',\r\n          left: 'center'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: function (params) {\r\n            if (params.dataType === 'edge') {\r\n              return `${params.data.source} → ${params.data.target}`;\r\n            }\r\n            const node = params.data;\r\n            return `\r\n              <div style=\"padding: 10px;\">\r\n                <div><strong>${node.name.split('\\n')[0]}</strong></div>\r\n                <div>地址: ${node.value}</div>\r\n                <div>端口: ${node.port}</div>\r\n                <div>内存使用率: ${node.name.split('Mem: ')[1].split(' | ')[0]}</div>\r\n                <div>CPU使用率: ${node.name.split('CPU: ')[1].split(' | ')[0]}</div>\r\n                <div>磁盘使用率: ${node.name.split('Disk: ')[1].split('%')[0]}%</div>\r\n              </div>\r\n            `;\r\n          }\r\n        },\r\n        series: [\r\n          {\r\n            type: 'graph',\r\n            layout: 'none',\r\n            symbol: 'roundRect',\r\n            roam: true,\r\n            edgeSymbol: ['none', 'arrow'],\r\n            edgeSymbolSize: [80, 45],\r\n            edgeLabel: {\r\n              show: true\r\n            },\r\n            data: seriesData,\r\n            links: this.links,\r\n            lineStyle: {\r\n              color: '#999',\r\n              opacity: 0.6,\r\n              width: 3,\r\n              curveness: 0\r\n            },\r\n            emphasis: {\r\n              focus: 'adjacency',\r\n              lineStyle: {\r\n                width: 5,\r\n                color: '#333'\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      };\r\n\r\n      this.chart.setOption(this.option);\r\n      window.addEventListener('resize', () => {\r\n        this.chart.resize();\r\n      });\r\n    },\r\n    calculatePositions () {\r\n      const positions = {};\r\n      const width = this.$refs.topologyChart.clientWidth || 800;\r\n      const height = this.$refs.topologyChart.clientHeight || 300;\r\n\r\n      // 找到各角色节点\r\n      const managerNode = this.nodes.find(node => node.role === 'Manager');\r\n      const gatewayNodes = this.nodes.filter(node => node.role === 'Gateway');\r\n      const executorNodes = this.nodes.filter(node => node.role === 'Executor');\r\n\r\n      // 设置Manager位置在顶部中央\r\n      if (managerNode) {\r\n        positions[managerNode.id] = {\r\n          x: (width / 2),\r\n          y: height * 0.01\r\n        };\r\n      }\r\n\r\n      // 设置Gateway位置在中间层，平均分布\r\n      if (gatewayNodes.length > 0) {\r\n        const gatewaySpacing = width / (gatewayNodes.length + 1);\r\n        gatewayNodes.forEach((node, index) => {\r\n          positions[node.id] = {\r\n            x: gatewaySpacing * (index + 1),\r\n            y: height * 0.10\r\n          };\r\n        });\r\n      }\r\n\r\n      // 设置Executor位置在底部层，平均分布\r\n      if (executorNodes.length > 0) {\r\n        const executorSpacing = width / (executorNodes.length + 1);\r\n        executorNodes.forEach((node, index) => {\r\n          positions[node.id] = {\r\n            x: executorSpacing * (index + 1),\r\n            y: height * 0.25\r\n          };\r\n        });\r\n      }\r\n\r\n      return positions;\r\n    },\r\n    updateNodeData () {\r\n      this.loadNodeData();\r\n      // 模拟实时数据更新\r\n      this.nodes.forEach(node => {\r\n        // 随机更新资源使用率\r\n        node.memory = Math.min(100, Math.max(0, node.memory + (Math.random() - 0.5) * 10));\r\n        node.cpu = Math.min(100, Math.max(0, node.cpu + (Math.random() - 0.5) * 10));\r\n        node.disk = Math.min(100, Math.max(0, node.disk + (Math.random() - 0.5) * 2));\r\n\r\n        // 随机改变状态\r\n        if (Math.random() > 0.8) {\r\n          node.status = Math.random() > 0.2 ? 'normal' : 'warning';\r\n        }\r\n      });\r\n\r\n      // 更新图表\r\n      this.renderChart();\r\n    },\r\n    refreshData () {\r\n      // 模拟数据刷新\r\n      this.updateNodeData();\r\n\r\n      // 显示刷新提示\r\n      this.$message({\r\n        message: '数据已刷新',\r\n        type: 'success',\r\n        duration: 1000\r\n      });\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    if (this.chart) {\r\n      this.chart.dispose();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.topology-container {\r\n  width: 100%;\r\n  height: 88vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.header {\r\n  padding: 20px;\r\n  background-color: #b2c8e2;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  z-index: 10;\r\n}\r\n\r\n.refresh-btn {\r\n  padding: 10px 20px;\r\n  background-color: #409eff;\r\n  color: rgb(23, 14, 109);\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.refresh-btn:hover {\r\n  background-color: #66b1ff;\r\n}\r\n\r\n.topology-content {\r\n  flex: 1;\r\n  padding: 5px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#topology-chart {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 400px;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.legend {\r\n  display: flex;\r\n  gap: 6px;\r\n  padding: 5px;\r\n  background: white;\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n  border: 1px solid rgba(226, 232, 240, 0.5);\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.legend-color {\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.manager-color {\r\n  background-color: #3b82f6;\r\n}\r\n\r\n.gateway-color {\r\n  background-color: #10b981;\r\n}\r\n\r\n.executor-color {\r\n  background-color: #f59e0b;\r\n}\r\n\r\n.legend-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n}\r\n\r\n.legend-text {\r\n  color: #1e293b;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n}\r\n\r\n.legend-desc {\r\n  color: #64748b;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/setting/topology.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"topology-container\",style:({ backgroundColor: _vm.backgroundColor })},[_c('div',{staticClass:\"header\"},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('button',{staticClass:\"refresh-btn\",on:{\"click\":_vm.refreshData}},[_vm._v(\"点击刷新\")])]),_vm._v(\" \"),_c('div',{staticClass:\"topology-content\"},[_c('div',{ref:\"topologyChart\",attrs:{\"id\":\"topology-chart\"}})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"legend-item\"},[_c('div',{staticClass:\"legend-color manager-color\"}),_vm._v(\" \"),_c('div',{staticClass:\"legend-info\"},[_c('span',{staticClass:\"legend-text\"},[_vm._v(\"Manager\")]),_vm._v(\" \"),_c('span',{staticClass:\"legend-desc\"},[_vm._v(\"接口管理节点\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"legend-item\"},[_c('div',{staticClass:\"legend-color gateway-color\"}),_vm._v(\" \"),_c('div',{staticClass:\"legend-info\"},[_c('span',{staticClass:\"legend-text\"},[_vm._v(\"Gateway\")]),_vm._v(\" \"),_c('span',{staticClass:\"legend-desc\"},[_vm._v(\"接口网关节点\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"legend-item\"},[_c('div',{staticClass:\"legend-color executor-color\"}),_vm._v(\" \"),_c('div',{staticClass:\"legend-info\"},[_c('span',{staticClass:\"legend-text\"},[_vm._v(\"Executor\")]),_vm._v(\" \"),_c('span',{staticClass:\"legend-desc\"},[_vm._v(\"接口执行节点\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-17088faf\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/setting/topology.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-17088faf\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./topology.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./topology.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./topology.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-17088faf\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./topology.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-17088faf\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/setting/topology.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}