webpackJsonp([18],{QZ7T:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),n={name:"ServiceSearch",data:function(){return{searchKeyword:"",moduleItemList:[],selectedModuleList:[],currentPage:1,pageSize:12,totalCount:0,allData:[]}},methods:{loadModules:function(){var t=this;this.moduleItemList=[],this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/module/listAll",data:i()({page:1,size:2147483647,searchText:null})}).then(function(e){0===e.data.code?t.moduleItemList=e.data.data||[]:(t.moduleItemList=[],e.data.message&&alert("加载模块列表失败:"+e.data.message))})},loadInterface:function(){var t=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/assignment/search",data:window.JSON.stringify({moduleIds:this.selectedModuleList,searchText:this.searchKeyword,page:this.currentPage,size:this.pageSize})}).then(function(e){0===e.data.code?(t.currentPage=e.data.pagination.page,t.pageSize=e.data.pagination.size,t.totalCount=e.data.pagination.total,t.allData=e.data.data):alert("加载列表失败:"+e.data.message)})},handleSearch:function(){this.currentPage=1,this.loadInterface()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.loadInterface()},handleCurrentChange:function(t){this.currentPage=t,this.loadInterface()},handleGoDetail:function(t){this.$router.push("/service/detail?id="+t.id+"&commitId="+t.commitId)}},created:function(){this.loadModules(),this.loadInterface()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("el-container",{staticClass:"app-container"},[a("el-header",{staticClass:"app-header"},[a("div",{staticClass:"header-content"},[a("div",{staticClass:"search-box"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入接口名称关键词搜索"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}),t._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("\n            搜索\n          ")])],1)])]),t._v(" "),a("el-container",[a("el-aside",{staticClass:"app-aside",attrs:{width:"280px"}},[a("div",{staticClass:"filter-section"},[a("h3",{staticClass:"filter-title"},[t._v("模块筛选")]),t._v(" "),a("el-checkbox-group",{staticClass:"checkbox-group",model:{value:t.selectedModuleList,callback:function(e){t.selectedModuleList=e},expression:"selectedModuleList"}},t._l(t.moduleItemList,function(e){return a("el-checkbox",{key:e.id,staticClass:"filter-checkbox",attrs:{label:e.id},on:{change:t.handleSearch}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),1)],1)]),t._v(" "),a("el-main",{staticClass:"app-main"},[a("div",{staticClass:"card-grid"},t._l(t.allData,function(e){return a("el-card",{key:e.id,staticClass:"content-card",attrs:{"body-style":{padding:"0px"}},nativeOn:{click:function(a){return t.handleGoDetail(e)}}},[a("div",{staticClass:"card-content"},[a("h4",{staticClass:"card-title"},[t._v("【"+t._s(e.id)+"】"+t._s(e.name))]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"需要认证",placement:"top-end"}},[e.open?t._e():a("i",{staticClass:"el-icon-user operator-icon",staticStyle:{float:"right"}})]),t._v(" "),a("div",{staticClass:"card-meta"},[a("span",{staticClass:"card-date"},[t._v("上线时间："+t._s(e.createTime))])]),t._v(" "),a("el-tag",[t._v(t._s(e.method))]),a("span",[t._v(t._s(e.path))]),t._v(" "),a("div",{staticClass:"card-meta"},[a("span",{staticClass:"card-tag"},[t._v("上线版本："),a("el-tag",[t._v("V"+t._s(e.version))])],1)]),t._v(" "),a("p",{staticClass:"card-desc"},[t._v(t._s(e.description))]),t._v(" "),a("div",{staticClass:"card-meta"},[a("span",{staticClass:"card-tag"},[t._v("模块名称："+t._s(e.moduleName))]),t._v(" "),a("span",{staticClass:"card-tag"},[t._v("授权分组："+t._s(e.groupName))])])],1)])}),1),t._v(" "),a("div",{staticClass:"pagination-section"},[a("el-pagination",{staticClass:"custom-pagination",attrs:{"current-page":t.currentPage,"page-sizes":[12,24,36,48],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,c,!1,function(t){a("rdkB")},"data-v-6102bdd8",null);e.default=l.exports},rdkB:function(t,e){}});
//# sourceMappingURL=18.2f9468da3b70e70177d7.js.map