webpackJsonp([17],{"+79G":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),l=a.n(n),r=a("mw3O"),o=a.n(r),s={name:"group",components:{},data:function(){return{loading:!0,lists:[],tableData:[],currentPageNum:1,currentPageSize:10,totalItemCount:0,searchText:"",ShowTokenDialog:!1,clientTokenValue:"",serverSseUrlAddress:"",serverStreamUrlAddress:"",createform:{name:""},updateform:{id:0,name:""},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},createFormVisible:!1,updateFormVisible:!1}},methods:{loadData:function(){var e=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1//mcp/client/listAll",data:l()({page:this.currentPageNum,size:this.currentPageSize,searchText:this.searchText})}).then(function(t){0===t.data.code?(e.totalItemCount=t.data.pagination.total,e.tableData=t.data.data):alert("加载数据失败:"+t.data.message)})},loadManagerAddress:function(e){var t=this;this.$http({method:"GET",url:"/sqlrest/manager/api/v1/mcp/client/endpoint"}).then(function(a){t.serverSseUrlAddress="",t.serverStreamUrlAddress="",0===a.data.code?(t.serverSseUrlAddress=a.data.data.sseAddrPrefix+e,t.serverStreamUrlAddress=a.data.data.streamAddrPrefix+e):a.data.message&&alert("加载数据失败:"+a.data.message)})},handleClose:function(e){},handleDelete:function(e,t){var a=this;this.$confirm("此操作将此令牌ID="+t.id+"删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.delete("/sqlrest/manager/api/v1/mcp/client/delete/"+t.id).then(function(e){0===e.data.code?a.loadData():alert("删除失败:"+e.data.message)})})},addGroup:function(){this.createFormVisible=!0,this.createform={}},handleCreate:function(){var e=this;this.$refs.createform.validate(function(t){t?e.$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"/sqlrest/manager/api/v1/mcp/client/create",data:o.a.stringify({name:e.createform.name})}).then(function(t){0===t.data.code?(e.createFormVisible=!1,e.$message("添加成功"),e.createform={},e.loadData()):alert("添加失败:"+t.data.message)}):alert("请检查输入")})},handleShowToken:function(e,t){this.loadManagerAddress(t.token),this.clientTokenValue=t.token,this.ShowTokenDialog=!0},handleCopyTokenText:function(){document.getElementById("tokenTextInput").select(),document.execCommand("copy"),this.$message.success("复制令牌成功")},handleCopySseAddressText:function(){document.getElementById("sseAddressTextInput").select(),document.execCommand("copy"),this.$message.success("复制SSE地址成功")},handleCopyStreamAddressText:function(){document.getElementById("streamAddressTextInput").select(),document.execCommand("copy"),this.$message.success("复制StreamableHttp地址成功")},handleUpdate:function(e,t){this.updateform=JSON.parse(l()(t)),this.updateFormVisible=!0},handleSave:function(){var e=this;this.$refs.updateform.validate(function(t){t?e.$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"/sqlrest/manager/api/v1/mcp/client/update/"+e.updateform.id,data:o.a.stringify({name:e.updateform.name})}).then(function(t){0===t.data.code?(e.updateFormVisible=!1,e.$message("修改成功"),e.loadData(),e.updateform={}):alert("修改失败:"+t.data.message)}):alert("请检查输入")})},handleSizeChange:function(e){this.currentPageSize=e,this.loadData()},handleCurrentChange:function(e){this.currentPageNum=e,this.loadData()},searchByKeyword:function(){this.currentPage=1,this.loadData()}},mounted:function(){this.loadData()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{staticClass:"group-list-top"},[a("div",{staticClass:"left-search-input-group"},[a("div",{staticClass:"left-search-input"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"名称搜索",size:"mini",clearable:!0},on:{change:e.searchByKeyword},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)]),e._v(" "),a("div",{staticClass:"right-add-button-group"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-document-add"},on:{click:e.addGroup}},[e._v("添加")])],1)]),e._v(" "),a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,size:"small",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"编号","min-width":"5%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":"","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","show-overflow-tooltip":"","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"35%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-document",round:""},on:{click:function(a){return e.handleShowToken(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"warning",icon:"el-icon-edit",round:""},on:{click:function(a){return e.handleUpdate(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-delete",round:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page",attrs:{align:"right"}},[a("el-pagination",{attrs:{"current-page":e.currentPageNum,"page-sizes":[5,10,20,40],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalItemCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查看",visible:e.ShowTokenDialog},on:{"update:visible":function(t){e.ShowTokenDialog=t}}},[a("el-form",{attrs:{size:"mini"}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"MCP访问令牌","label-width":"100px"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"input",spellcheck:!1,id:"tokenTextInput"},model:{value:e.clientTokenValue,callback:function(t){e.clientTokenValue=t},expression:"clientTokenValue"}}),e._v(" "),a("el-button",{on:{click:e.handleCopyTokenText}},[e._v("点击复制")])],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"SSE服务地址","label-width":"100px"}},[a("el-tooltip",{attrs:{effect:"dark",content:"服务器发送事件(SSE)",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-input",{staticStyle:{width:"80%"},attrs:{type:"input",spellcheck:!1,id:"sseAddressTextInput"},model:{value:e.serverSseUrlAddress,callback:function(t){e.serverSseUrlAddress=t},expression:"serverSseUrlAddress"}}),e._v(" "),a("el-button",{staticStyle:{width:"10%"},on:{click:e.handleCopySseAddressText}},[e._v("点击复制")])],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"流式Http地址","label-width":"100px"}},[a("el-tooltip",{attrs:{effect:"dark",content:"可流式传输的HTTP(StreamableHttp)",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-input",{staticStyle:{width:"80%"},attrs:{type:"input",spellcheck:!1,id:"streamAddressTextInput"},model:{value:e.serverStreamUrlAddress,callback:function(t){e.serverStreamUrlAddress=t},expression:"serverStreamUrlAddress"}}),e._v(" "),a("el-button",{staticStyle:{width:"10%"},on:{click:e.handleCopyStreamAddressText}},[e._v("点击复制")])],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ShowTokenDialog=!1}}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加信息",visible:e.createFormVisible,showClose:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.createFormVisible=t}}},[a("el-form",{ref:"createform",attrs:{model:e.createform,size:"mini","status-icon":"",rules:e.rules}},[a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"令牌名称","label-width":"120px",required:!0,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createform.name,callback:function(t){e.$set(e.createform,"name",t)},expression:"createform.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改信息",visible:e.updateFormVisible,showClose:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.updateFormVisible=t}}},[a("el-form",{ref:"updateform",attrs:{model:e.updateform,size:"mini","status-icon":"",rules:e.rules}},[a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"令牌名称","label-width":"120px",required:!0,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.updateform.name,callback:function(t){e.$set(e.updateform,"name",t)},expression:"updateform.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(s,i,!1,function(e){a("nlTI")},"data-v-8fefd77c",null);t.default=d.exports},nlTI:function(e,t){}});
//# sourceMappingURL=17.284598952c280533ad9b.js.map