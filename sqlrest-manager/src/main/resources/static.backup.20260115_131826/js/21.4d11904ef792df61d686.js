webpackJsonp([21],{kmMP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),o=a.n(l),i={name:"client",components:{},data:function(){return{loading:!0,keyword:null,lists:[],currentPage:1,pageSize:10,totalCount:0,tableData:[],groups:[],clientId:0,selectList:[],moduleList:[],apiList:[],createform:{name:"",description:"",moduleId:null,apiId:null},updateform:{id:0,name:"",description:"",moduleId:null,apiId:null},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],description:[{required:!0,message:"描述不能为空",trigger:"blur"}]},createFormVisible:!1,updateFormVisible:!1}},methods:{loadData:function(){var e=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/mcp/tool/listAll",data:o()({searchText:this.keyword,page:this.currentPage,size:this.pageSize})}).then(function(t){0===t.data.code?(e.currentPage=t.data.pagination.page,e.pageSize=t.data.pagination.size,e.totalCount=t.data.pagination.total,e.tableData=t.data.data):alert("加载数据失败:"+t.data.message)})},loadModules:function(){var e=this;this.moduleList=[],this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/module/listAll",data:o()({page:1,size:2147483647,searchText:null})}).then(function(t){0===t.data.code?e.moduleList=t.data.data||[]:t.data.message&&(alert("加载数据失败:"+t.data.message),e.moduleList=[])})},stringFormatApiInfo:function(e,t){return"["+e.apiMethod+"]"+e.apiPath},handleClose:function(e){},handleLink:function(e,t){this.$router.push("/interface/detail?id="+t.apiId)},handleAdd:function(){this.loadModules(),this.createFormVisible=!0},handleUpdate:function(e,t){this.loadModules(),this.selectChangedModule(t.moduleId),this.updateform={id:t.id,name:t.name,description:t.description,moduleId:t.moduleId,apiId:t.apiId},this.updateFormVisible=!0},selectChangedModule:function(e){var t=this;this.apiList=[],this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/assignment/list",data:window.JSON.stringify({moduleId:e,online:!0,page:1,size:2147483647})}).then(function(e){0===e.data.code?t.apiList=e.data.data:alert("加载列表失败:"+e.data.message)})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将此工具ID="+t.id+"删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.delete("/sqlrest/manager/api/v1/mcp/tool/delete/"+t.id).then(function(e){0===e.data.code?a.loadData():alert("删除失败:"+e.data.message)})})},handleCreate:function(){var e=this;this.$refs.createform.validate(function(t){t?e.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/mcp/tool/create",data:o()({name:e.createform.name,description:e.createform.description,apiId:e.createform.apiId})}).then(function(t){0===t.data.code?(e.createFormVisible=!1,e.$message("添加成功"),e.createform={},e.loadData()):alert("添加失败:"+t.data.message)}):alert("请检查输入")})},handleSave:function(){var e=this;this.$refs.updateform.validate(function(t){t?e.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/mcp/tool/update",data:o()({id:e.updateform.id,name:e.updateform.name,description:e.updateform.description,apiId:e.updateform.apiId})}).then(function(t){0===t.data.code?(e.updateFormVisible=!1,e.$message("修改成功"),e.updateform={},e.loadData()):alert("修改失败:"+t.data.message)}):alert("请检查输入")})},handleSizeChange:function(e){this.loading=!0,this.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.loading=!0,this.currentPage=e,this.loadData()},searchByKeyword:function(){this.currentPage=1,this.loadData()}},created:function(){this.loadData()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{staticClass:"client-list-top"},[a("div",{staticClass:"left-search-input-group"},[a("div",{staticClass:"left-search-input"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入名称关键字搜索",size:"mini",clearable:!0},on:{change:e.searchByKeyword},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)]),e._v(" "),a("div",{staticClass:"right-add-button-group"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-document-add"},on:{click:e.handleAdd}},[e._v("添加")])],1)]),e._v(" "),a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,size:"small",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"编号","min-width":"5%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"工具名称","show-overflow-tooltip":"","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述","show-overflow-tooltip":"","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"apiName",label:"链接接口",formatter:e.stringFormatApiInfo,"show-overflow-tooltip":"","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"35%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small",type:"warning",icon:"el-icon-document",round:""},on:{click:function(a){return e.handleLink(t.$index,t.row)}}},[e._v("跳转")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-edit",round:""},on:{click:function(a){return e.handleUpdate(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-delete",round:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page",attrs:{align:"right"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加工具",visible:e.createFormVisible,showClose:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.createFormVisible=t}}},[a("el-form",{ref:"createform",attrs:{model:e.createform,size:"mini","status-icon":"",rules:e.rules}},[a("el-form-item",{staticStyle:{width:"85%"},attrs:{"label-width":"120px",required:!0,prop:"name"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{slot:"label"},slot:"label"},[e._v("\n            工具名称\n            "),a("el-tooltip",{attrs:{effect:"dark",content:"tool的名称，即函数名，建议采用英文字母、数字及下划线命名",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createform.name,callback:function(t){e.$set(e.createform,"name",t)},expression:"createform.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{"label-width":"120px",required:!0,prop:"description"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{slot:"label"},slot:"label"},[e._v("\n            工具描述\n            "),a("el-tooltip",{attrs:{effect:"dark",content:"tool的描述，请尽量详细描述此项，以便大模型能够正确使用到此tool",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:6,spellcheck:!1,placeholder:"请输入","auto-complete":"off"},model:{value:e.createform.description,callback:function(t){e.$set(e.createform,"description",t)},expression:"createform.description"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"模块名称","label-width":"120px",required:!0}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChangedModule},model:{value:e.createform.moduleId,callback:function(t){e.$set(e.createform,"moduleId",t)},expression:"createform.moduleId"}},e._l(e.moduleList,function(e,t){return a("el-option",{key:t,attrs:{label:"["+e.id+"] "+e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"接口名称","label-width":"120px",required:!0}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createform.apiId,callback:function(t){e.$set(e.createform,"apiId",t)},expression:"createform.apiId"}},e._l(e.apiList,function(e,t){return a("el-option",{key:t,attrs:{label:"["+e.id+"] "+e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改工具",visible:e.updateFormVisible,showClose:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.updateFormVisible=t}}},[a("el-form",{ref:"updateform",attrs:{model:e.updateform,size:"mini","status-icon":"",rules:e.rules}},[a("el-form-item",{staticStyle:{width:"85%"},attrs:{"label-width":"120px",required:!0,prop:"name"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{slot:"label"},slot:"label"},[e._v("\n            工具名称\n            "),a("el-tooltip",{attrs:{effect:"dark",content:"tool的名称，即函数名，建议采用英文字母、数字及下划线命名",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.updateform.name,callback:function(t){e.$set(e.updateform,"name",t)},expression:"updateform.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{"label-width":"120px",required:!0,prop:"description"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{slot:"label"},slot:"label"},[e._v("\n            工具描述\n            "),a("el-tooltip",{attrs:{effect:"dark",content:"tool的描述，请尽量详细描述此项，以便大模型能够正确使用到此tool",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:6,spellcheck:!1,placeholder:"请输入","auto-complete":"off"},model:{value:e.updateform.description,callback:function(t){e.$set(e.updateform,"description",t)},expression:"updateform.description"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"模块名称","label-width":"120px",required:!0}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChangedModule},model:{value:e.updateform.moduleId,callback:function(t){e.$set(e.updateform,"moduleId",t)},expression:"updateform.moduleId"}},e._l(e.moduleList,function(e,t){return a("el-option",{key:t,attrs:{label:"["+e.id+"] "+e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"接口名称","label-width":"120px",required:!0}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateform.apiId,callback:function(t){e.$set(e.updateform,"apiId",t)},expression:"updateform.apiId"}},e._l(e.apiList,function(e,t){return a("el-option",{key:t,attrs:{label:"["+e.id+"] "+e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(e){a("olGF")},"data-v-28e41114",null);t.default=r.exports},olGF:function(e,t){}});
//# sourceMappingURL=21.4d11904ef792df61d686.js.map