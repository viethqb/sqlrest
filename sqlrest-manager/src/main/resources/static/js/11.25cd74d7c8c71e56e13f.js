webpackJsonp([11],{M1cf:function(e,t){},i2vO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("BO1k"),l=a.n(i),o=a("mvHQ"),n=a.n(o),r={name:"client",components:{},data:function(){return{loading:!0,groupId:null,keyword:null,lists:[],currentPage:1,pageSize:10,totalCount:0,tableData:[],groups:[],clientId:0,selectList:[],showAuthDialog:!1,ShowSecretDialog:!1,clientSecret:"",createform:{name:"",description:"",appKey:"",expireTime:"",tokenAlive:""},rules:{name:[{required:!0,message:"Name cannot be empty",trigger:"blur"}],appKey:[{required:!0,message:"Application account cannot be empty",trigger:"blur"}],expireTime:[{required:!0,message:"Expiration time must be selected",trigger:"change"}],tokenAlive:[{required:!0,message:"Token lifetime must be selected",trigger:"change"}]},createFormVisible:!1}},methods:{loadData:function(){var e=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/client/list",data:n()({groupId:this.groupId,searchText:this.keyword,page:this.currentPage,size:this.pageSize})}).then(function(t){0===t.data.code?(e.currentPage=t.data.pagination.page,e.pageSize=t.data.pagination.size,e.totalCount=t.data.pagination.total,e.tableData=t.data.data):alert("Failed to load data: "+t.data.message)})},loadAllGroups:function(){var e=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/group/listAll",data:n()({page:1,size:2147483647,searchText:null})}).then(function(t){0===t.data.code?e.groups=t.data.data:alert("Failed to load data: "+t.data.message)}).catch(function(e){})},stringFormatExpireDuration:function(e,t){return"FOR_EVER"===e.expireDuration?"Never Expires":"ONLY_ONCE"===e.expireDuration?"Expires Once":"TIME_VALUE"===e.expireDuration?e.expireAtStr:"-"},stringFormatTokenAlive:function(e,t){return"LONGEVITY"===e.tokenAlive?"Long-term":"PERIOD"===e.tokenAlive?"Short-term":"-"},searchByKeyword:function(){this.currentPage=1,this.loadData()},handleClose:function(e){},handleDelete:function(e,t){var a=this;this.$confirm("This operation will delete application ID="+t.id+", continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){a.$http.delete("/sqlrest/manager/api/v1/client/delete/"+t.id).then(function(e){0===e.data.code?a.loadData():alert("Failed to delete: "+e.data.message)})})},addClient:function(){this.createFormVisible=!0,this.createform={}},handleCreate:function(){var e=this;this.$refs.createform.validate(function(t){t?e.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/client/create",data:n()({name:e.createform.name,description:e.createform.description,appKey:e.createform.appKey,expireTime:e.createform.expireTime,tokenAlive:e.createform.tokenAlive})}).then(function(t){0===t.data.code?(e.createFormVisible=!1,e.$message("Information added successfully"),e.createform={},e.loadData()):alert("Failed to add information: "+t.data.message)}):alert("Please check input")})},handleSizeChange:function(e){this.loading=!0,this.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.loading=!0,this.currentPage=e,this.loadData()},handleShowSecret:function(e,t){var a=this;this.ShowSecretDialog=!0,this.$http.get("/sqlrest/manager/api/v1/client/secret/"+t.id).then(function(e){0===e.data.code?a.clientSecret=e.data.data:alert("Operation failed: "+e.data.message)})},handleCopyText:function(){document.getElementById("secretTextInput").select(),document.execCommand("copy"),this.$message.success("Copied successfully")},handleAuthorize:function(e,t){var a=this;this.showAuthDialog=!0,this.$http.get("/sqlrest/manager/api/v1/client/auth/"+t.id).then(function(e){a.selectList=[],a.clientId=t.id;var i=!0,o=!1,n=void 0;try{for(var r,s=l()(e.data);!(i=(r=s.next()).done);i=!0){var c=r.value;a.selectList.push(c.id)}}catch(e){o=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}})},handleSaveAuth:function(){var e=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/client/auth/create",data:n()({id:this.clientId,groupIds:this.selectList})}).then(function(t){0===t.data.code?e.showAuthDialog=!1:alert("Operation failed: "+t.data.message)})}},created:function(){this.loadData(),this.loadAllGroups()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"page-title"},[e._v("CLIENT APPLICATION")]),e._v(" "),a("el-card",[a("div",{staticClass:"client-list-top"},[a("div",{staticClass:"left-search-input-group"},[a("div",{staticClass:"left-search-input"},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small",clearable:!0,placeholder:"Select Authorization Group"},on:{change:e.searchByKeyword},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.groups,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter name keyword to search",size:"small",clearable:!0},on:{change:e.searchByKeyword},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)]),e._v(" "),a("div",{staticClass:"right-add-button-group"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addClient}},[e._v("Add")])],1)]),e._v(" "),a("el-table",{attrs:{data:e.tableData,size:"small",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"5%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"Application Name","show-overflow-tooltip":"","min-width":"18%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"Description","show-overflow-tooltip":"","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appKey","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.appKey}},[e._v(e._s(t.row.appKey))])]}}])},[a("template",{slot:"header"},[a("span",{staticStyle:{"white-space":"nowrap"}},[e._v("Application Account")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"expireDuration",label:"Expiration Time",formatter:e.stringFormatExpireDuration,"show-overflow-tooltip":"","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isExpired",label:"Expired","show-overflow-tooltip":"","min-width":"8%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isExpired?a("el-tag",{attrs:{type:"danger",effect:"dark",size:"mini"}},[e._v("Expired\n          ")]):e._e(),e._v(" "),t.row.isExpired?e._e():a("el-tag",{attrs:{type:"primary",effect:"dark",size:"mini"}},[e._v("Not Expired\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tokenAlive",label:"Token Lifetime",formatter:e.stringFormatTokenAlive,"show-overflow-tooltip":"","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"Create Time","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{label:"Actions","min-width":"15%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"Authorize",placement:"top",effect:"dark"}},[a("el-button",{attrs:{plain:"",size:"mini",type:"primary",circle:""},on:{click:function(a){return e.handleAuthorize(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-lock"})])],1),e._v(" "),a("el-tooltip",{attrs:{content:"Secret",placement:"top",effect:"dark"}},[a("el-button",{attrs:{plain:"",size:"mini",type:"info",circle:""},on:{click:function(a){return e.handleShowSecret(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-view"})])],1),e._v(" "),a("el-tooltip",{attrs:{content:"Delete",placement:"top",effect:"dark"}},[a("el-button",{attrs:{plain:"",size:"mini",type:"danger",circle:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page",attrs:{align:"right"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"Add Application Information",visible:e.createFormVisible,showClose:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.createFormVisible=t}}},[a("el-form",{ref:"createform",attrs:{model:e.createform,size:"small","status-icon":"",rules:e.rules}},[a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"Application Name","label-width":"120px",required:!0,prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.createform.name,callback:function(t){e.$set(e.createform,"name",t)},expression:"createform.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"Description","label-width":"120px",prop:"description"}},[a("el-input",{attrs:{type:"textarea",size:"small",rows:6,spellcheck:!1,placeholder:"Please enter","auto-complete":"off"},model:{value:e.createform.description,callback:function(t){e.$set(e.createform,"description",t)},expression:"createform.description"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"Application Account","label-width":"120px",prop:"appKey"}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.createform.appKey,callback:function(t){e.$set(e.createform,"appKey",t)},expression:"createform.appKey"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"85%"},attrs:{label:"Application Expiration Time","label-width":"120px",prop:"expireTime"}},[a("el-select",{attrs:{size:"small"},model:{value:e.createform.expireTime,callback:function(t){e.$set(e.createform,"expireTime",t)},expression:"createform.expireTime"}},[a("el-option",{attrs:{label:"Never",value:"EXPIRE_FOR_EVER"}}),e._v(" "),a("el-option",{attrs:{label:"Once",value:"EXPIRE_ONLY_ONCE"}}),e._v(" "),a("el-option",{attrs:{label:"5 Minutes",value:"EXPIRE_05_MIN"}}),e._v(" "),a("el-option",{attrs:{label:"30 Minutes",value:"EXPIRE_30_MIN"}}),e._v(" "),a("el-option",{attrs:{label:"1 Hour",value:"EXPIRE_01_HOUR"}}),e._v(" "),a("el-option",{attrs:{label:"12 Hours",value:"EXPIRE_12_HOUR"}}),e._v(" "),a("el-option",{attrs:{label:"1 Day",value:"EXPIRE_01_DAY"}}),e._v(" "),a("el-option",{attrs:{label:"15 Days",value:"EXPIRE_15_DAY"}}),e._v(" "),a("el-option",{attrs:{label:"1 Month",value:"EXPIRE_01_MOUTH"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"35%"},attrs:{"label-width":"120px",prop:"tokenAlive"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{slot:"label"},slot:"label"},[e._v("\n            Token Lifetime\n            "),a("el-tooltip",{attrs:{effect:"dark",content:"â€˜'Short-term' token duration is 7200 seconds, renew by calling authentication API after expiration; 'Long-term' token never expires, but expires when application expires, and is deleted when application is deleted.",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-select",{attrs:{size:"small"},model:{value:e.createform.tokenAlive,callback:function(t){e.$set(e.createform,"tokenAlive",t)},expression:"createform.tokenAlive"}},[a("el-option",{attrs:{label:"Short-term",value:"PERIOD"}}),e._v(" "),a("el-option",{attrs:{label:"Long-term",value:"LONGEVITY"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createFormVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("OK")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"View Secret",visible:e.ShowSecretDialog},on:{"update:visible":function(t){e.ShowSecretDialog=t}}},[a("el-input",{staticStyle:{width:"55%"},attrs:{type:"input",id:"secretTextInput"},model:{value:e.clientSecret,callback:function(t){e.clientSecret=t},expression:"clientSecret"}}),e._v(" "),a("el-button",{on:{click:e.handleCopyText}},[e._v("Click to Copy")]),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ShowSecretDialog=!1}}},[e._v("Cancel")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Authorization Group",visible:e.showAuthDialog},on:{"update:visible":function(t){e.showAuthDialog=t},open:e.loadAllGroups}},[a("el-checkbox-group",{model:{value:e.selectList,callback:function(t){e.selectList=t},expression:"selectList"}},e._l(e.groups,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showAuthDialog=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSaveAuth()}}},[e._v("Save")])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(e){a("M1cf")},"data-v-cc184730",null);t.default=c.exports}});
//# sourceMappingURL=11.25cd74d7c8c71e56e13f.js.map