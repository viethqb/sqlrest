webpackJsonp([23],{"T+/8":function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={name:"LoginPage",data:function(){return{loginForm:{username:"",password:""},errors:{},loading:!1}},computed:{currentYear:function(){return(new Date).getFullYear()}},methods:{validateForm:function(){return this.loginForm.username&&this.loginForm.username.trim()?!!this.loginForm.password||(this.$message.error("Please enter password"),!1):(this.$message.error("Please enter username"),!1)},resetLoading:function(){this.loading=!1},handleLogin:function(){var e=this;this.loading||this.validateForm()&&(this.loading=!0,this.$http({method:"POST",url:"/user/login",data:{username:this.loginForm.username,password:this.loginForm.password}}).then(function(s){0===s.data.code?(window.sessionStorage.setItem("token",s.data.data.accessToken),window.sessionStorage.setItem("username",e.loginForm.username),window.sessionStorage.setItem("realname",s.data.data.realName),e.$http.get("/sqlrest/manager/api/v1/health/version").then(function(s){0===s.data.code?(window.sessionStorage.setItem("version",s.data.data),e.$message("Login successful!"),e.$router.push({path:"/dashboard"})):e.$message(s.data.message),e.resetLoading()})):(e.$message.error("Login failed: "+s.data.message),e.resetLoading())}).catch(function(s){e.resetLoading(),e.$message.error("Login failed: "+(s||"Unable to connect"))}))}},created:function(){var e=this;document.onkeydown=function(s){13==window.event.keyCode&&e.handleLogin()}},destroyed:function(){document.onkeydown=null}},t={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"box body-bg"},[a("div",{staticClass:"content"},[a("div",{staticClass:"item header"},[e._v("\n      SQLREST\n    ")]),e._v(" "),a("div",{staticClass:"item"},[a("el-input",{attrs:{placeholder:"Please enter username"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}})],1),e._v(" "),a("div",{staticClass:"item"},[a("el-input",{attrs:{placeholder:"Please enter password",type:"password"},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}})],1),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"button",class:{disabled:e.loading},on:{click:e.handleLogin}},[e.loading?e._e():a("span",[e._v("Login")]),e._v(" "),e.loading?a("span",{staticClass:"loading-text"},[e._v("Logging in...")]):e._e()])])])])},staticRenderFns:[]};var o=a("VU/8")(n,t,!1,function(e){a("ZcCJ")},"data-v-2dce6b38",null);s.default=o.exports},ZcCJ:function(e,s){}});
//# sourceMappingURL=23.13144feec1cb54e18f32.js.map