webpackJsonp([14],{QZ7T:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),n=a.n(l),i={name:"ServiceSearch",data:function(){return{searchKeyword:"",moduleItemList:[],selectedModuleList:[],currentPage:1,pageSize:12,totalCount:0,allData:[]}},methods:{loadModules:function(){var e=this;this.moduleItemList=[],this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/module/listAll",data:n()({page:1,size:2147483647,searchText:null})}).then(function(t){0===t.data.code?e.moduleItemList=t.data.data||[]:(e.moduleItemList=[],t.data.message&&alert("Failed to load module list: "+t.data.message))})},loadInterface:function(){var e=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/sqlrest/manager/api/v1/assignment/search",data:window.JSON.stringify({moduleIds:this.selectedModuleList,searchText:this.searchKeyword,page:this.currentPage,size:this.pageSize})}).then(function(t){0===t.data.code?(e.currentPage=t.data.pagination.page,e.pageSize=t.data.pagination.size,e.totalCount=t.data.pagination.total,e.allData=t.data.data):alert("Failed to load list: "+t.data.message)})},handleSearch:function(){this.currentPage=1,this.loadInterface()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.loadInterface()},handleCurrentChange:function(e){this.currentPage=e,this.loadInterface()},handleGoDetail:function(e){this.$router.push("/service/detail?id="+e.id+"&commitId="+e.commitId)}},created:function(){this.loadModules(),this.loadInterface()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"page-title"},[e._v("ONLINE APIs")]),e._v(" "),a("el-card",[a("div",{staticStyle:{"margin-bottom":"15px",display:"flex",gap:"15px","align-items":"center"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter API name keyword to search",size:"small"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSearch}},[e._v("\n        Search\n      ")]),e._v(" "),a("el-checkbox-group",{staticStyle:{"margin-left":"20px"},on:{change:e.handleSearch},model:{value:e.selectedModuleList,callback:function(t){e.selectedModuleList=t},expression:"selectedModuleList"}},e._l(e.moduleItemList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,border:"",size:"small"}},[e._v("\n          "+e._s(t.name)+"\n        ")])}),1)],1),e._v(" "),a("el-table",{attrs:{data:e.allData,size:"small",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"8%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"Name","show-overflow-tooltip":"","min-width":"18%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleGoDetail(t.row)}}},[e._v(e._s(t.row.name))]),e._v(" "),t.row.open?e._e():a("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"5px",color:"#909399"},attrs:{title:"Authentication Required"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Path","show-overflow-tooltip":"","min-width":"25%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticClass:"method-tag",attrs:{size:"small"}},[e._v(e._s(t.row.method))]),e._v(" "),a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.row.path))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"moduleName",label:"Module","show-overflow-tooltip":"","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"Authorization Group","show-overflow-tooltip":"","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{label:"Version","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small"}},[e._v("V"+e._s(t.row.version))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"Create Time","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{label:"Actions","min-width":"15%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"Details",placement:"top",effect:"dark"}},[a("el-button",{attrs:{plain:"",size:"mini",type:"primary",circle:""},on:{click:function(a){return e.handleGoDetail(t.row)}}},[a("i",{staticClass:"el-icon-view"})])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{"margin-top":"20px"},attrs:{align:"right"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(e){a("bSE3")},"data-v-a4c031c6",null);t.default=r.exports},bSE3:function(e,t){}});
//# sourceMappingURL=14.d2ab34ccd76926727cf0.js.map